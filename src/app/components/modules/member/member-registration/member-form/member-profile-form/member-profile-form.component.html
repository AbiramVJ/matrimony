<form [formGroup]="userBasicFrom">
  <div class="form-row">
    <!-- First Name -->
    <div class="row">
      <div class="col-12 col-md-6">
        <div class="form-group mb-3">
          <label for="firstName" class="mb-1">First Name <span class="text-danger">*</span> </label>
          <input type="text" id="firstName" formControlName="firstName" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userBasicFrom.get('firstName')?.errors}">
          <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userBasicFrom.get('firstName')?.errors">First name is required</div>
        </div>
      </div>

      <div class="col-12 col-md-6">
      <!-- Last Name -->
      <div class="form-group mb-3">
        <label for="lastName text-sm" class="mb-1" >Last Name <span class="text-danger">*</span></label>
        <input type="text" id="lastName" formControlName="lastName" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userBasicFrom.get('lastName')?.errors}">
        <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userBasicFrom.get('lastName')?.errors">Last name is required</div>
      </div>
      </div>
      <div class="col-12 col-md-6">
        <!-- Date of Birth -->
        <div class="form-group mb-3">
          <label for="dateOfBirth text-sm" class="mb-1">
            Date of Birth <span class="text-danger">*</span>
          </label>
          <input
            type="date"
            id="dateOfBirth"
            formControlName="dateOfBirth"
            class="form-control"
            [ngClass]="{ 'errorBorder': isSubmitted && userBasicFrom.get('dateOfBirth')?.errors }"
          />
          <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userBasicFrom.get('dateOfBirth')?.errors">
            <ng-container *ngIf="userBasicFrom.get('dateOfBirth')?.errors?.['required']">
              Date of birth is required
            </ng-container>
            <ng-container *ngIf="userBasicFrom.get('dateOfBirth')?.errors?.['underage']">
              You must be at least 18 years old
            </ng-container>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-3">
        <div class="form-group mb-3">
          <label for="height" class="mb-1">Height (Cm) <span class="text-danger">*</span></label>
          <input type="number" id="height" formControlName="height" class="form-control"  [ngClass]="{'errorBorder': isSubmitted && userBasicFrom.get('height')?.errors}">
          <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userBasicFrom.get('height')?.errors" class="error-message">
            <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userBasicFrom.get('height')?.errors?.['required']">Height is required</div>
            <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userBasicFrom.get('height')?.errors?.['min']">Invalid height</div>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-3">
        <div class="form-group mb-3">
          <label for="weight" class="mb-1">Weight (Kg) <span class="text-danger">*</span> </label>
          <input type="number" id="weight" formControlName="weight" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userBasicFrom.get('weight')?.errors}">
          <div *ngIf="isSubmitted && userBasicFrom.get('weight')?.errors" class="error-message">
            <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userBasicFrom.get('weight')?.errors?.['required']">Weight is required</div>
            <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userBasicFrom.get('weight')?.errors?.['min']">Invalid weight</div>
          </div>
        </div>
      </div>

      <div class="col-12">
        <div class="mt-3 image-upload">
          <label class="">Profile Image <span class="text-danger">*</span> </label>
          <div class="text-xs text-muted mb-1">You can upload a maximum of 5 images. Each image must be clear and between 250 KB and 5 MB in size.</div>
          <div class="rounded p-3" [ngClass]="images.length === 0 && isSubmitted ? 'errorBorder' : 'border'">
            <div class="dot-border p-2">
              <div class="d-flex flex-wrap gap-2" id="image-container">
                <!-- Render uploaded images with remove button -->
                <div class="position-relative img-box" *ngFor="let img of images; let i = index">
                  <img [src]="img" class="object-fit-cover border rounded" width="80" height="80" />
                  <button class="btn btn-sm position-absolute top-0 end-0 p-1 rounded-circle" (click)="removeImage(i)" style="transform: translate(30%, -30%);">
                  <i class="fa fa-window-close text-md text-danger" aria-hidden="true"></i>
                  </button>
                </div>
                <div *ngIf="images.length < 5" class="img-box border rounded pointer d-flex justify-content-center align-items-center" style="width: 80px; height: 80px;" (click)="fileInput.click()">
                  <span class="text-md fw-bold" *ngIf="!isUploading">+</span>
                  <div class="spinner-border spinner-border-sm text-light me-1" role="status" *ngIf="isUploading"></div>
                </div>
              </div>
            </div>
          </div>


          <!-- Hidden File Input -->
          <input type="file"  accept="image/*"  #fileInput (change)="onFileSelected($event)" style="display: none"/>
          <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && images.length === 0">Image is required</div>
          <div class="form-check mt-1">
            <input class="form-check-input small-check" type="checkbox" [value]="true" id="flexCheckChecked" formControlName="isVisible">
            <label class="form-check-label ms-2 text-sm" for="flexCheckChecked">
              Make it visible.
            </label>
          </div>

        </div>
      </div>
      <div class="col-12 col-md-12">
        <!-- Gender -->
        <div class="form-group mb-3 mt-3">
          <label class="mb-1">Gender <span class="text-danger">*</span> </label>
          <div class="d-flex">
            <div class="me-3">
              <div class="form-check">
                <input class="form-check-input pointer" type="radio" name="gender" id="genderMale" [value]="1" formControlName="gender">
                <label class="form-check-label ms-2 pointer" for="genderMale">Male</label>
              </div>
            </div>
            <div class="me-3">
              <div class="form-check">
                <input class="form-check-input pointer" type="radio" name="gender" id="genderFemale" [value]="2" formControlName="gender">
                <label class="form-check-label ms-2 pointer" for="genderFemale">Female</label>
              </div>
            </div>
          </div>
        </div>

      </div>
      <div class="col-12 col-md-6">
        <!-- Marital Status -->
        <div class="form-group mb-3 mt-3">
          <label class="mb-1">Marital Status <span class="text-danger">*</span> </label>
          <div class="d-flex">
            <div class="me-3">
              <div class="form-check">
                <input class="form-check-input" type="radio" name="maritalStatus" id="maritalSingle" [value]="1" formControlName="maritalStatus" checked>
                <label class="form-check-label pointer ms-2" for="maritalSingle">
                  Single
                </label>
              </div>
            </div>
            <div class="me-3">
              <div class="form-check">
                <input class="form-check-input" type="radio" name="maritalStatus" id="maritalMarried" [value]="2" formControlName="maritalStatus">
                <label class="form-check-label pointer ms-2" for="maritalMarried">
                  Married
                </label>
              </div>
            </div>
            <div class="me-3">
              <div class="form-check">
                <input class="form-check-input" type="radio" name="maritalStatus" id="Divorced" [value]="3" formControlName="maritalStatus">
                <label class="form-check-label pointer ms-2" for="Divorced">
                  Divorced
                </label>
              </div>
            </div>
            <div class="me-3">
              <div class="form-check">
                <input class="form-check-input" type="radio" name="maritalStatus" id="Widowed" [value]="4" formControlName="maritalStatus">
                <label class="form-check-label pointer ms-2" for="Widowed">
                  Widowed
                </label>
              </div>
            </div>
            <div class="me-3">
              <div class="form-check">
                <input class="form-check-input" type="radio" name="maritalStatus" id="Separated" [value]="5" formControlName="maritalStatus">
                <label class="form-check-label pointer ms-2" for="Separated">
                  Separated
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<button class="btn btn-danger me-3 w-100 mt-5" (click)="next()" [disabled]="isLoading">
    <div class="spinner-border spinner-border-sm text-light me-1" *ngIf="isLoading"></div>{{isEditFrom ? 'UPDATE': 'NEXT'}}</button>
</form>

