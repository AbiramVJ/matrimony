<form [formGroup]="userContactFrom">
  <div class="row">
    <div class="text-md fw-bold text-muted mb-3">Permanent Address</div>
    <div class="col-12 col-md-6 mb-3">
      <label for="email text-sm" class="mb-2">Email<span class="text-danger">*</span> </label>
      <input type="email" id="email" formControlName="email" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userContactFrom.get('email')?.errors}">
      <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userContactFrom.get('email')?.errors?.['required']">Email is required</div>
      <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userContactFrom.get('email')?.errors?.['email']">Invalid email</div>
    </div>
    <div class="col-12 col-md-6">
      <app-phone-number-input (phoneNumberEmitter)="getPhoneNumber($event)" [isSubmitted]="isSubmitted"></app-phone-number-input>
    </div>
    <!-- DOOR NUMBER -->
    <div class="col-12 col-md-6 mb-3">
      <label for="Door text-sm" class="mb-2">Door Number</label>
      <input type="text" id="Door" formControlName="doorNumber" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userContactFrom.get('doorNumber')?.errors}"/>
      <!-- <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userContactFrom.get('doorNumber')?.errors">City is required</div> -->
    </div>

     <!-- STREET -->
    <div class="col-12 col-md-6 mb-3">
      <label for="Street text-sm" class="mb-2">Street<span class="text-danger">*</span> </label>
      <input type="text" id="Street" formControlName="street" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userContactFrom.get('street')?.errors}"/>
      <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userContactFrom.get('street')?.errors">Street is required</div>
    </div>

    <div class="col-12 col-md-6 mb-3">
      <label for="city text-sm" class="mb-2">City<span class="text-danger">*</span> </label>
      <input type="text" id="city" formControlName="city" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userContactFrom.get('city')?.errors}"/>
      <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userContactFrom.get('city')?.errors">City is required</div>
    </div>

    <div class="col-12 col-md-6 mb-3">
      <label for="province text-sm" class="mb-2">State/Province<span class="text-danger">*</span> </label>
      <input type="text" id="province" formControlName="stateProvince" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userContactFrom.get('stateProvince')?.errors}"/>
      <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userContactFrom.get('stateProvince')?.errors">State/Province is required</div>
    </div>

    <div class="col-12 col-md-6 mb-3">
      <label for="province text-sm" class="mb-2">Zip Code<span class="text-danger">*</span> </label>
      <input type="text" id="province" formControlName="zipCode" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userContactFrom.get('zipCode')?.errors}"/>
      <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userContactFrom.get('zipCode')?.errors">ZipCode is required</div>
    </div>

    <div class="col-12 col-md-6 mb-3">
      <label for="email text-sm" class="mb-2">Country<span class="text-danger">*</span> </label>
      <ng-select
      [items]="countryList"
      bindLabel="country"
      bindValue="country"
      [ngModelOptions]="{standalone: true}"
      [clearable]="false"
      [searchable]="false"
      [(ngModel)]="selectedCountry"

      >

      <!-- Label template -->
      <ng-template ng-label-tmp let-item="item">
        <div class="d-flex">
          <div>
            <img class="me-2" src={{item.flags?.svg}} alt="" width="30px">
          </div>
          <div>
            {{item.country}}
          </div>
        </div>
      </ng-template>
      <!-- Option template -->
      <ng-template ng-option-tmp let-item="item" let-search="searchTerm">
        <div class="d-flex">
          <div>
            <img src={{item.flags?.svg}} alt="" width="30px" class="me-2">
          </div>

          <div class="">
            {{item.country}}
          </div>
        </div>
      </ng-template>
    </ng-select>
    </div>



    <div class="col-12 col-md-6 mb-3">
      <label for="text-sm" class="mb-2">Residency Status<span class="text-danger">*</span> </label>
      <ng-select [items]="residencyStatusList" bindLabel="name" bindValue="id" [searchable]="false" [clearable]="false" formControlName="residencyStatus" [(ngModel)]="selectedResidency"></ng-select>
    </div>

    <div class="mt-3">
      <div class="d-flex" (click)="addTemAddress()">
        <div class="me-2" >
          <i *ngIf="!isTemporaryAddress" class="fas fa-plus text-primary"></i>
          <i *ngIf="isTemporaryAddress" class="fas fa-times text-danger"></i>
        </div>
        <div class="" [ngClass]="isTemporaryAddress ? 'text-danger':'text-primary'">{{isTemporaryAddress ?'Remove temporary address' :'Add temporary address'}}</div>
      </div>
    </div>

    <!-- <div class="col-12 col-md-6">
      <div class="form-group mb-3">
      <label for="text-sm" class="mb-2">Address<span class="text-danger">*</span> </label>
        <div class="d-flex">
          <div class="me-3">
            <div class="form-check">
              <input class="form-check-input pointer" type="radio" name="address" id="permanentId" value="permanent" formControlName="addressType">
              <label class="form-check-label ms-2" for="permanentId">Permanent</label>
            </div>
          </div>
          <div class="me-3">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="address" id="temporaryId" value="temporary">
              <label class="form-check-label ms-2 pointer" for="temporaryId">Temporary</label>
            </div>
          </div>
        </div>
      </div>
    </div> -->
<!--
    <div class="col-12">
      <textarea class="text-area" id="exampleFormControlTextarea1" [rows]="4" formControlName = "address" [ngClass]="{'errorBorder': isSubmitted && userContactFrom.get('address')?.errors}"></textarea>
      <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userContactFrom.get('address')?.errors">Address is required</div>

    </div> -->

    <div class="mt-3" formGroupName="temporaryAddress" *ngIf="isTemporaryAddress">
      <div class="row">
        <div class="text-md fw-bold text-muted mb-3">Temporary Address</div>
          <!-- DOOR NUMBER -->
          <div class="col-12 col-md-6 mb-3">
            <label for="Door text-sm" class="mb-2">Door Number</label>
            <input type="text" id="Door" formControlName="doorNumber" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userContactFrom.get('temporaryAddress.doorNumber')?.errors}"/>
            <!-- <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userContactFrom.get('doorNumber')?.errors">City is required</div> -->
          </div>

          <!-- STREET -->
          <div class="col-12 col-md-6 mb-3">
            <label for="Street text-sm" class="mb-2">Street<span class="text-danger">*</span> </label>
            <input type="text" id="Street" formControlName="street" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userContactFrom.get('temporaryAddress.street')?.errors}"/>
            <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userContactFrom.get('temporaryAddress.street')?.errors">Street is required</div>
          </div>
        <div class="col-12 col-md-6 mb-3">
          <label for="city text-sm" class="mb-2">City<span class="text-danger">*</span> </label>
          <input type="text" id="city" formControlName="city" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userContactFrom.get('temporaryAddress.city')?.errors}"/>
          <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userContactFrom.get('temporaryAddress.city')?.errors">City is required</div>
        </div>

        <div class="col-12 col-md-6 mb-3">
          <label for="province text-sm" class="mb-2">State/Province<span class="text-danger">*</span> </label>
          <input type="text" id="province" formControlName="stateProvince" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userContactFrom.get('temporaryAddress.stateProvince')?.errors}"/>
          <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userContactFrom.get('temporaryAddress.stateProvince')?.errors">State/Province is required</div>

        </div>

      <div class="col-12 col-md-6 mb-3">
        <label for="province text-sm" class="mb-2">Zip Code<span class="text-danger">*</span> </label>
        <input type="text" id="province" formControlName="zipCode" class="form-control" [ngClass]="{'errorBorder': isSubmitted && userContactFrom.get('zipCode')?.errors}"/>
        <div class="text-xs text-danger mt-1" *ngIf="isSubmitted && userContactFrom.get('zipCode')?.errors">ZipCode is required</div>
      </div>

        <div class="col-12 col-md-6 mb-3">
          <label for="email text-sm" class="mb-2">Country<span class="text-danger">*</span> </label>
          <ng-select
          [items]="countryList"
          bindLabel="country"
          bindValue="country"
          [ngModelOptions]="{standalone: true}"
          [clearable]="false"
          [searchable]="false"
          [(ngModel)]="selectedTempCountry"

          >

          <!-- Label template -->
          <ng-template ng-label-tmp let-item="item">
            <div class="d-flex">
              <div>
                <img class="me-2" src={{item.flags?.svg}} alt="" width="30px">
              </div>
              <div>
                {{item.country}}
              </div>
            </div>
          </ng-template>
          <!-- Option template -->
          <ng-template ng-option-tmp let-item="item" let-search="searchTerm">
            <div class="d-flex">
              <div>
                <img src={{item.flags?.svg}} alt="" width="30px" class="me-2">
              </div>

              <div class="">
                {{item.country}}
              </div>
            </div>
          </ng-template>
        </ng-select>
        </div>

        <div class="col-12 col-md-6 mb-3">
          <label for="text-sm" class="mb-2">Residency Status<span class="text-danger">*</span> </label>
          <ng-select [items]="residencyStatusList" bindLabel="name" bindValue="id" [searchable]="false" [clearable]="false" formControlName="residencyStatus" [(ngModel)]="selectedTempResidency"></ng-select>
        </div>
      </div>
    </div>

    <button class="btn btn-danger me-3 w-100 mt-5" (click)="next()">
      <div class="spinner-border spinner-border-sm text-light me-1" *ngIf="isLoading"></div>NEXT</button>
  </div>
</form>
