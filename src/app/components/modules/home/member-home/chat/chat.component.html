
<div class="mt-3 col-5 mx-auto">
    <input
                  type="text"
                  class="search-field mt-3"
                  placeholder="ReciverId"
                  [(ngModel)]="receiverId">
</div>


<section class="content">
  <div class="component-content">
    <div class="row m-0 mt-3">
      <div class="col-11 col-sm-10 mx-auto m-shadow mb-5">
        <div class="row chat-main">
          <div class="col-12 col-sm-4 p-0 chat-list">
             <div class="search-wrapper">
                <input
                  type="text"
                  class="search-field"
                  placeholder="Search conversations..."
                  [(ngModel)]="searchTerm">

              </div>
             <div *ngFor="let member of members" class="d-flex align-items-center p-3 border-bottom member-item conversation-item pointer" >
            <!-- Avatar -->
            <div class="position-relative me-3">
              <div class="rounded-circle d-flex align-items-center justify-content-center fw-semibold text-white" style="width: 40px; height: 40px;">
               <img [src]="member.avatar" [alt]="member.name" class="avatar-image" onerror="this.style.display='none'">
              </div>
              <span class="position-absolute bottom-0 end-0 rounded-circle border border-2 border-white" style="width: 12px; height: 12px;"></span>
            </div>
            <!-- Member Info -->
            <div class="flex-grow-1 min-w-0">
              <div class="d-flex align-items-center justify-content-between">
                <h6 class="mb-0 text-truncate fw-medium">
                  {{ member.name }}
                </h6>
                <span class="text-sm">Today</span>
              </div>
              <small class="text-muted">
                {{ member.status === 'online' ? 'Active now' : 'Last seen ' + member.lastSeen }}
              </small>
            </div>
            </div>
          </div>
          <!-- CHAT BOX CONTAINER -->
           <div class="col-8 p-3 border-start d-none d-sm-block">
            <div class="d-flex border-bottom pb-2">
              <div class="">
                <img src="https://ui-avatars.com/api/?name=Alex+Brown&background=random" [alt]="" class="avatar-image" onerror="this.style.display='none'">
              </div>
              <div class="ms-3 text-sm my-auto">
                <div class="fw-bold text-muted">Abiram</div>
                <div class="text-muted" >Today</div>

              </div>
            </div>
            <div class="flex-grow-1 overflow-auto mt-3 mb-2 px-2 m-box" id="chatMessages" #chatMessages >
            <div *ngFor="let message of messagesCheck" class="mb-2">
              <div class="d-flex" [ngClass]="{'justify-content-end': message.isMine}">
                <div class="p-2 rounded" [ngClass]="{'bg-danger text-white': message.isMine, 'bg-light': !message.isMine}" style="max-width: 70%;">
                  <div *ngIf="message.type === 2">{{ message.content }}</div>
                  <div *ngIf="message.type === 1">
                    <img [src]="message.content" class="img-fluid rounded" width="300px" />
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Message input area -->
          <form (ngSubmit)="sendMessage()" enctype="multipart/form-data">
            <div class="d-flex align-items-center gap-2 border-top pt-2">
              <input type="text" [(ngModel)]="newMessage" name="message" class="form-control" placeholder="Type a message..." required />

              <input type="file" (change)="onFileSelected($event)" hidden #fileInput />
              <button type="button" class="btn btn-outline-secondary" (click)="fileInput.click()">
                ðŸ“Ž
              </button>

              <button type="submit" class="btn btn-danger">
                âž¤
              </button>
            </div>
          </form>
           </div>
        </div>
      </div>
    </div>
  </div>
</section>



<!--
<div class="container mt-4">
  <h2>Chat Room</h2>

  <div class="mb-3">
    <label for="receiverId" class="form-label">Send To (Receiver ID):</label>
    <input type="text" id="receiverId" [(ngModel)]="receiverId" class="form-control" />
  </div>

  <div class="mb-3">
    <label for="message" class="form-label">Message:</label>
    <textarea id="message" [(ngModel)]="messageCheck" rows="3" class="form-control"></textarea>
  </div>

  <button class="btn btn-primary" (click)="sendMessages()">Send</button>


  <hr />

  <div *ngFor="let msg of messagesCheck" class="alert alert-light mt-2">
    <strong>{{ msg.sender }}:</strong> {{ msg.content }}
  </div>
</div> -->
