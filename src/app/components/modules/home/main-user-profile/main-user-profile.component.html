
<section class="content">
  <div class="component-content">
    <div class="container mt-4">
      <div class="row justify-content-center pb-3">
        <div class="col-md-8 col-lg-10">
          <div class="row" *ngIf="mainUser" >
            <div class="col-4">
              <div class="list-group">
                <div class="list-group-item list-group-item-action pointer" (click)="isGeneral = true" [ngClass]="{'bg-danger text-white':isGeneral}">
                  General
                </div>
                <div class="list-group-item list-group-item-action pointer"  (click)="isGeneral = false" [ngClass]="{'bg-danger text-white':!isGeneral}">
                  Security
                </div>
              </div>
            </div>
            <div class="col-8">
              <div class="border border-15 bg-white p-3" *ngIf="isGeneral">
                <h4 class="mb-1">Profile Information<span class="badge bg-warning text-dark ms-3">Gold</span></h4>
                <div class="text-muted text-sm">Update your personal information and profile settings</div>

                <div class="mt-3">
                 <div class="profile-avatar position-relative">
                <!-- Image Preview -->
                <div class="avatar-container">
                  <img [src]="mainUser.image" [alt]="" class="avatar-img" onerror="this.style.display='none'">
                  <div class="avatar-overlay">
                    <button type="button" class="btn btn-sm btn-light avatar-btn">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </div>
                <!-- Edit Image Button -->
                <div  class="avatar-edit-btn" data-bs-toggle="modal" data-bs-target="#profileImgModal">
                  <label for="imageInput" class="btn btn-sm btn-light rounded-circle">
                    <i class="fas fa-camera"></i>
                  </label>

                </div>
              </div>
              </div>

              <hr>
                <form [formGroup]="profileForm">
                <div class="row">
                  <div class="col-6">
                    <div class="form-group mb-3">
                    <label class="form-label">
                      <i class="fas fa-user me-2"></i>First Name
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      formControlName="firstName"
                      placeholder="Enter first name">

                  </div>
                  </div>
                  <div class="col-6">
                    <div class="form-group mb-3">
                    <label class="form-label">
                      <i class="fas fa-user me-2"></i>Last Name
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      formControlName="lastName"
                      placeholder="Enter last name">

                  </div>
                  </div>
                  <div class="col-6">
                    <div class="form-group mb-3">
                    <label class="form-label">
                      <i class="fas fa-envelope me-2"></i>Email Address
                    </label>
                    <input
                      type="email"
                      class="form-control"
                      formControlName="email"
                      [readonly]="true"
                      placeholder="Enter email address">
                  </div>
                  </div>
                  <div class="col-6">
                    <div class="form-group mb-4">
                    <label class="form-label">
                      <i class="fas fa-phone me-2"></i>Phone Number
                    </label>
                    <input type="tel" class="form-control" formControlName="phoneNumber" [readonly]="true" placeholder="Enter phone number">
                  </div>
                  </div>
                  <div class="col-12">
                    <button class="btn btn-primary" (click)="saveUser()" [disabled]="isSaveLoading">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                          <polyline points="17 21 17 13 7 13 7 21"/>
                          <polyline points="7 3 7 8 15 8"/>
                        </svg>
                        Save Image <div class="spinner-border spinner-border-sm text-light me-1" *ngIf="isSaveLoading"></div>
                      </button>
                  </div>

                </div>
              </form>
              </div>

               <div class="border border-15 bg-white p-3" *ngIf="!isGeneral">
                 <h4 class="mb-1">Security & Privacy</h4>
                 <div class="text-muted text-sm">Manage your password and security preferences</div>
                 <div class="my-3 h5">Change Password</div>
                   <div class="mt-3">
                    <form [formGroup]="resetPasswordFrom">
                      <div class="row">
                        <div class="col-12">
                          <div class="form-group mb-3">
                            <label class="form-label">
                              Current Password
                            </label>
                            <input
                              type="password"
                              class="form-control"
                              formControlName="correctPassword"
                              >
                          </div>
                        </div>
                        <div class="col-12">
                          <div class="form-group mb-3">
                            <label class="form-label">
                              New Password
                            </label>
                            <input
                              type="password"
                              class="form-control"
                              formControlName="newPassword"
                              >
                          </div>
                        </div>
                        <div class="col-12">
                          <div class="form-group mb-3">
                            <label class="form-label">
                              Confirm New Password
                            </label>
                            <input
                              type="password"
                              class="form-control"
                              formControlName="confirmNewPassword"
                              >
                          </div>
                        </div>
                        <div class="col-12">
                          <button class="btn btn-light">
                              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                                <polyline points="17 21 17 13 7 13 7 21"/>
                                <polyline points="7 3 7 8 15 8"/>
                              </svg>
                              Update Password <div class="spinner-border spinner-border-sm text-light me-1" *ngIf="false"></div>
                            </button>
                        </div>
                      </div>
                    </form>
               </div>
               </div>


            </div>
          </div>
        </div>
      </div>

      <div class="row mb-3 d-block d-sm-none">
        <div class="col-12 col-sm-12 col-md-6 mx-auto">
           <button class="btn btn-danger w-100" (click)="_authLogout()" >Log out </button>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Modal -->
<div class="modal fade" id="profileImgModal" data-bs-backdrop="static" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Image Cropper</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="close-btn"></button>
      </div>
      <div class="modal-body">
        <app-image-cropper (imageCroppedEvent)="onImageCropped($event)"></app-image-cropper>
      </div>
    </div>
  </div>
</div>
