<section class="content">
  <div class="component-content">
    <div class="row m-0" [ngClass]="isSingUp ? 'bg-image-s' : 'bg-image'">
      <div class="col-12 col-md-8 col-lg-4 mx-auto">
        <div class="row">
          <div class="col-12">
            <div class="d-flex justify-content-center align-items-center">
              <div class="col-12">
                <div class="m-shadow col-12 px-4 py-3 bg-white mt-5">
                  <div class="row">
                    <div class="col-12 d-flex align-item-center justify-content-center">
                      <div class="">
                        <svg xmlns="http://www.w3.org/2000/svg" width="200px" viewBox="0 0 400 150">
                          <defs>
                            <linearGradient id="goldGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                              <stop offset="0%" stop-color="#FFD700" />
                              <stop offset="100%" stop-color="#FFA500" />
                            </linearGradient>
                          </defs>
                          <path d="M10,80 Q60,50 110,80 Q160,110 210,80 Q260,50 310,80 Q360,110 390,80" stroke="#FFD700"
                            stroke-width="2" fill="none" />
                          <circle cx="200" cy="45" r="15" fill="none" stroke="url(#goldGradient)" stroke-width="3" />
                          <circle cx="215" cy="45" r="15" fill="none" stroke="#FF0000" stroke-width="3" />
                          <text x="200" y="90" font-family="'Segoe UI', Arial, sans-serif" font-size="42" font-weight="bold"
                            text-anchor="middle" fill="#FF0000">Matri<tspan fill="#FFD700">mony</tspan></text>
                          <text x="200" y="115" font-family="'Segoe UI', Arial, sans-serif" font-size="16"
                            text-anchor="middle" fill="#333">Forever Begins Here</text>
                        </svg>
                     </div>
                     <!-- <div class="d-flex">
                      <div>
                        <img src="assets/images/logo.png" alt="logo" width="45px">
                      </div>
                      <div class="ms-2 logo-text">
                        <div class="fw-bold">Forever Begins Here</div>
                        <div cl>mgate.com</div>
                      </div>
                   </div> -->
                    </div>
                  </div>

                  <!-- ------------------------------------- SIGIN IN AND SIGN UP ---------------------------------------->
                  <div *ngIf="!isForgot">
                    <div class="d-flex" [ngClass]="isOtpVerification ? ' justify-content-between' : ' justify-content-center'">
                      <div *ngIf="!isOtpVerification"> <h5 class="text-center text-muted fw-bold">{{isSingUp ? 'SIGN UP' : 'SIGN IN'}}</h5></div>
                      <div class="pointer" (click)="isForgot = false"  *ngIf="isOtpVerification">
                        <i class="fas fa-arrow-left fs-5 mt-2 text-danger"></i>
                      </div>
                      <div *ngIf="isOtpVerification"> <h5 class="text-center text-muted fw-bold">Enter your verification code</h5></div>
                      <div></div>
                      <!-- <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" (click)="changeLoginType()">
                        <label class="form-check-label" for="flexSwitchCheckDefault">Agent</label>
                      </div> -->
                    </div>
                    <!-- LOGIN -->
                    <div *ngIf="!isSingUp">
                      <div *ngIf="!isOtpVerification">
                        <form [formGroup]="loginForm" autocomplete="off">
                          <div class="mb-3 mt-3" *ngIf="isEmailLogin">
                            <label for="email" class="form-label" >{{isEmailLogin ? 'Email' : 'Phone number'}}</label>
                            <input type="email" class="form-control" formControlName="email" id="email" placeholder=""  [ngClass]="{'errorBorder' : isSubmitted && loginForm.get('email')?.errors}" autocomplete="disabled">
                          </div>
                          <div class="mb-3 mt-3" *ngIf="!isEmailLogin">
                            <app-phone-number-input (phoneNumberEmitter)="getPhoneNumber($event)" [isSubmitted]="isSubmitted"></app-phone-number-input>
                          </div>
                          <div class="mb-3">
                            <label for="password" class="form-label" >Password</label>
                            <input type="password" class="form-control" formControlName="password" id="password" placeholder="" [ngClass]="{'errorBorder' : isSubmitted && loginForm.get('password')?.errors}" autocomplete="new-password">
                          </div>
                        </form>
                      </div>
                      <div *ngIf="isOtpVerification">
                        <app-verification (otpEmitter)="getOtpFromChild($event)"></app-verification>
                        <div *ngIf="isLoading" class="spinner-overlay">
                          <div class="m-spinner"></div>
                        </div>
                      <div class="text-sm text-muted mt-3">
                        We send a six digits verification code to your email <b>{{forgotForm.get('email')?.value}}</b>. You can check your inbox.
                      </div>
                      <div class="mt-3 text-primary pointer" (click)="login()">
                        <u>I didn't receive the code? Send again</u>
                      </div>
                     </div>
                    </div>
                    <!-- SIGN UP -->
                    <div *ngIf="isSingUp">
                      <div *ngIf="!isOtpVerification">
                        <form [formGroup]="signUpForm">
                          <div class="mb-3 mt-3">
                            <label for="firstname" class="form-label">First name</label>
                            <input type="text" class="form-control" id="first-name" formControlName="firstName" placeholder="" [ngClass]="{'errorBorder' : isSubmitted && signUpForm.get('firstName')?.errors}">
                          </div>

                          <div class="mb-3">
                            <label for="lasttname" class="form-label">Last name</label>
                            <input type="text" class="form-control" id="last-name" formControlName="lastName" placeholder="" [ngClass]="{'errorBorder' : isSubmitted && signUpForm.get('lastName')?.errors}">
                          </div>

                          <div class="mb-3">
                            <label for="s-email" class="form-label">Email address</label>
                            <input type="email" class="form-control" id="email-singup" formControlName="email" placeholder=""  [ngClass]="{'errorBorder' : isSubmitted && signUpForm.get('email')?.errors}" autocomplete="disabled">
                          </div>
                          <app-phone-number-input (phoneNumberEmitter)="getPhoneNumber($event)" [isSubmitted]="isSubmitted"></app-phone-number-input>
                          <div class="mb-3">
                            <label for="password-singnup" class="form-label">Password</label>
                            <input type="password" class="form-control" id="password-singnup" formControlName="password" placeholder=""  [ngClass]="{'errorBorder' : isSubmitted && signUpForm.get('password')?.errors}" (keyup)="updatePasswordStrength(true)" autocomplete="new-password">
                          </div>
                          <!-- Password strength progress bar -->
                          <div class="mt-1 mb-2">
                            <div class="progress" style="height: 5px;">
                              <div class="progress-bar" [ngClass]="passwordStrength.class" role="progressbar"
                                [style.width.%]="passwordStrength.value"
                                [attr.aria-valuenow]="passwordStrength.value" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <small class="form-text">Password strength: <span class="fw-bold">{{passwordStrength.text}}</span></small>
                          </div>
                        </form>
                      </div>

                       <!-- STEP 2 -->
                       <div *ngIf="isOtpVerification">
                          <app-verification (otpEmitter)="getOtpFromChild($event)"></app-verification>
                          <div *ngIf="isLoading" class="spinner-overlay">
                            <div class="m-spinner"></div>
                          </div>
                        <div class="text-sm text-muted mt-3">
                          We send a six digits verification code to your email <b>{{forgotForm.get('email')?.value}}</b>. You can check your inbox.
                        </div>
                        <div class="mt-3 text-primary pointer" (click)="resentOtp()">
                          <u>I didn't receive the code? Send again</u>
                        </div>
                      </div>
                    </div>
                    <div class="col-12 mb-3" *ngIf="!isOtpVerification">
                      <button class="btn btn-danger me-3 w-100" (click)="login()" [disabled]="isLoading" *ngIf="!isSingUp">
                        <div class="spinner-border spinner-border-sm text-light me-1" role="status" *ngIf="isLoading"></div>LOGIN</button>
                      <button class="btn btn-danger me-3 w-100"  (click)="signUp()" [disabled]="isLoading" *ngIf="isSingUp"><div class="spinner-border spinner-border-sm text-light me-1" role="status" *ngIf="isLoading"></div>SIGN UP</button>
                      <div class="mt-2 text-right pointer" *ngIf="!isSingUp" (click)="isForgotSubmitted = false; isForgot = true;">Forgot password?</div>
                      <!-- <button class="btn btn-danger me-3" (click)="isSingUp = true">SING-UP</button> -->
                    </div>
                    <div class="divider"  *ngIf="!isSingUp && !isOtpVerification">
                      <span>OR</span>
                    </div>
                    <div class="mb-3"  *ngIf="!isSingUp && !isOtpVerification">
                      <div class="login-page">
                        <app-social-login></app-social-login>
                      </div>
                      <div *ngIf="isEmailLogin" class="d-flex justify-content-center mt-3">
                        <div class="btn btn-light  s-btn p-1 border" (click)="loginWithPhoneNumber(false)" >
                          <div class="d-flex justify-content-between">
                            <div>
                              <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="25px" height="30px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                            viewBox="0 0 2048 2048"
                            xmlns:xlink="http://www.w3.org/1999/xlink">
                            <defs>
                              <style type="text/css">
                              .fil6 {fill:none}
                              .fil5 {fill:#020D1A}
                              .fil1 {fill:#051324}
                              .fil0 {fill:#15262E}
                              .fil2 {fill:#4FC3F7}
                              .fil3 {fill:#81D4FA}
                              .fil4 {fill:white}
                              </style>
                            </defs>
                            <g id="Layer_x0020_1">
                              <metadata id="CorelCorpID_0Corel-Layer"/>
                              <path class="fil0" d="M584 252l847 0c10,0 19,2 28,6 9,4 17,9 23,16 7,7 12,15 16,23 4,9 6,18 6,28l0 1391c0,10 -2,19 -6,28 -4,9 -9,17 -16,23 -7,7 -15,12 -23,16 -9,4 -18,6 -28,6l-847 0c-10,0 -19,-2 -28,-6 -9,-4 -17,-9 -23,-16 -7,-7 -12,-15 -16,-23 -4,-9 -6,-18 -6,-28l0 -1391c0,-10 2,-19 6,-28 4,-9 9,-17 16,-23 7,-7 15,-12 23,-16 9,-4 18,-6 28,-6z"/>
                              <polygon class="fil1" points="608,374 1408,374 1408,1468 608,1468 "/>
                              <polygon class="fil2" points="618,391 1395,391 1395,1468 618,1468 "/>
                              <polygon class="fil3" points="732,391 733,391 1395,391 1395,1468 1219,1468 1219,1468 "/>
                              <polygon class="fil2" points="618,391 732,391 1219,1468 618,1468 "/>
                              <path class="fil4" d="M1036 1566c-4,-2 -8,-2 -12,-2 -5,0 -9,1 -12,2 -4,2 -7,4 -10,7 -3,3 -5,7 -7,10 -2,4 -2,8 -2,12 0,4 1,9 2,12 2,4 4,8 7,11 3,3 6,5 10,7 4,2 8,2 12,2 4,0 9,-1 12,-2 4,-2 8,-4 10,-7 3,-3 5,-7 7,-11 2,-4 2,-8 2,-12 0,-5 -1,-9 -2,-12 -2,-4 -4,-7 -7,-10 -3,-3 -6,-5 -10,-7z"/>
                              <path class="fil4" d="M1008 1524c13,0 25,3 37,7 12,5 22,12 31,21 9,9 16,19 21,31 5,11 7,24 7,37 0,13 -3,25 -7,37 -5,12 -12,22 -21,31 -9,9 -19,16 -31,21 -11,5 -24,7 -37,7 -13,0 -25,-3 -37,-7 -12,-5 -22,-12 -31,-21 -9,-9 -16,-19 -21,-31 -5,-11 -7,-24 -7,-37 0,-13 3,-25 7,-37 5,-12 12,-22 21,-31 9,-9 19,-16 31,-21 11,-5 24,-7 37,-7z"/>
                              <rect class="fil5" x="895" y="309" width="226" height="25" rx="13" ry="13"/>
                              <path class="fil1" d="M1008 1542c10,0 20,2 30,6 10,4 18,10 25,17 7,7 13,16 17,25 4,9 6,19 6,30 0,10 -2,20 -6,30 -4,9 -10,18 -17,25 -7,7 -16,13 -25,17 -9,4 -19,6 -30,6 -10,0 -20,-2 -30,-6 -9,-4 -18,-10 -25,-17 -7,-7 -13,-16 -17,-25 -4,-9 -6,-19 -6,-30 0,-10 2,-20 6,-30 4,-10 10,-18 17,-25 7,-7 16,-13 25,-17 9,-4 19,-6 30,-6z"/>
                              <rect class="fil6" width="2048" height="2048"/>
                            </g>
                            </svg>
                            </div>
                            <div class="mt-1 text-md">Sign with phone number</div>
                            <div></div>
                          </div>
                        </div>
                      </div>
                      <div *ngIf="!isEmailLogin" class="d-flex justify-content-center mt-3">
                        <div class="btn btn-light s-btn p-1 border" (click)="loginWithPhoneNumber(true)" >
                          <div class="d-flex justify-content-between">
                            <div >
                              <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="25px" height="25px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                              viewBox="0 0 2048 2048"
                              xmlns:xlink="http://www.w3.org/1999/xlink">
                              <defs>
                                <style type="text/css">
                                .fil5 {fill:none}
                                .fil2 {fill:#37474F}
                                .fil0 {fill:#9C0000}
                                .fil3 {fill:#BF0000}
                                .fil4 {fill:#D50000}
                                .fil1 {fill:#E8E8D0}
                                </style>
                              </defs>
                              <g id="Layer_x0020_1">
                                <metadata id="CorelCorpID_0Corel-Layer"/>
                                <path class="fil0" d="M1800 934l0 779c0,13 -11,23 -23,23l-1489 0c-13,0 -23,-11 -23,-23l0 -779 0 0 728 -505c22,-15 60,-14 83,2l726 503 -1 0z"/>
                                <rect class="fil1" x="392" y="576" width="1280" height="838"/>
                                <path class="fil2" d="M1121 1200c-30,35 -72,59 -119,59 -3,0 -6,0 -10,0 -43,-3 -79,-26 -104,-61 -24,-33 -36,-73 -38,-113l0 0 0 -15c0,-6 0,-12 1,-18 4,-51 22,-102 55,-141 31,-36 73,-62 122,-62 3,0 6,0 10,0 37,3 70,21 94,48l3 -48 58 3 -19 309c-1,16 5,30 18,39 7,5 15,6 23,6 47,-2 85,-42 103,-83 20,-44 26,-104 14,-150 0,-1 0,-1 0,-2 -14,-51 -41,-98 -79,-136 -57,-57 -134,-89 -216,-89 -81,0 -158,32 -216,89 -57,57 -89,134 -89,216 0,81 32,158 89,216 57,57 134,89 216,89 65,0 128,-20 180,-59l23 -17 0 72 -7 4c-59,38 -127,58 -197,58 -97,0 -188,-38 -257,-106 -68,-68 -106,-160 -106,-257 0,-97 38,-188 106,-257 68,-68 160,-106 257,-106 97,0 188,38 257,106 45,45 77,101 94,162 0,1 0,1 0,1 13,59 9,130 -16,185 -28,62 -84,118 -156,121 -21,1 -41,-4 -58,-16 -18,-12 -29,-30 -36,-49zm-213 -125c1,31 9,63 27,88 15,20 36,35 62,37 2,0 4,0 5,0 31,0 58,-18 77,-41 25,-30 39,-69 42,-108 0,-5 0,-10 0,-14l0 -5c-1,-31 -9,-63 -27,-88 -15,-20 -36,-35 -62,-37 -2,0 -4,0 -5,0 -31,0 -58,18 -77,41 -25,30 -39,69 -42,108 0,5 0,10 0,14l0 5z"/>
                                <path class="fil3" d="M268 1725l608 -416 -612 -375 0 778c0,5 1,9 4,12z"/>
                                <path class="fil3" d="M1800 1713l0 -779 -1 0 -616 378 613 413c2,-4 4,-8 4,-12z"/>
                                <path class="fil4" d="M1797 1725c-4,7 -12,11 -20,11l-1489 0c-8,0 -16,-4 -20,-11l724 -503c22,-15 59,-14 83,2l722 501z"/>
                                <rect class="fil5" width="2048" height="2048"/>
                              </g>
                              </svg>
                            </div>
                            <div class="mt-1 text-right text-md">
                              Sign with email address
                            </div>
                            <div></div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="mt-3" *ngIf="!isSingUp && !isOtpVerification">Need an account? <u class="pointer fw-bold" (click)="changeSignUpStatus()">SIGN UP</u></div>
                    <div class="mt-3" *ngIf="isSingUp && !isOtpVerification">Already have an account? <u class="pointer fw-bold" (click)=" changeSignInStatus()">SIGN IN</u></div>
                  </div>


                   <!--------------------------------------- FORGOT FLOW ---------------------------------------->
                   <div  *ngIf="isForgot">
                    <div class="row">
                      <div class="col-sm-12 col-12 mx-auto">
                        <div>
                          <div class="d-flex " [ngClass]="step === resetStep.login ? 'justify-content-center' : 'justify-content-between' ">
                            <div class="pointer" (click)="backToStep()" *ngIf="step > resetStep.login">
                              <i class="fas fa-arrow-left fs-5 mt-2 text-danger"></i>
                            </div>
                            <div>
                              <h4 class="modal-title fw-bold text-muted" id="exampleModalToggleLabel"> {{step === resetStep.enterEmail ? 'Forgot password' : step === resetStep.verification ? 'Enter your verification code' : 'Set Your New Password'}}</h4>
                            </div>
                            <div></div>
                          </div>
                            <!-- STEP ONE -->
                            <div *ngIf="step === resetStep.enterEmail">
                              <div class="text-center">
                                <img src="https://cdni.iconscout.com/illustration/premium/thumb/otp-authentication-illustration-download-in-svg-png-gif-file-formats--one-time-password-security-protection-business-pack-illustrations-5840953.png" alt="" width="150px">
                                <div class="text-center text-muted">Please enter your {{isEmailLogin ? 'email address' : 'phone number'}} to receive a verification code </div>
                              </div>

                              <form [formGroup]="forgotForm">
                                <div class="mb-3 mt-3 position-relative">
                                  <div *ngIf="isEmailLogin">
                                    <label for="f-email" class="form-label">Email</label>
                                    <div class="input-group">
                                      <input
                                        type="email"
                                        class="form-control"
                                        formControlName="email"
                                        id="f-email"
                                        placeholder=""
                                        [ngClass]="{ 'errorBorder': isForgotSubmitted && forgotForm.get('email')?.errors }"
                                        autocomplete="off"
                                      />
                                    </div>
                                  </div>

                                  <div *ngIf="!isEmailLogin">
                                    <app-phone-number-input (phoneNumberEmitter)="getPhoneNumber($event)" [isSubmitted]="isForgotSubmitted"></app-phone-number-input>
                                  </div>
                                </div>

                              </form>
                            </div>

                            <!-- STEP 2 -->
                              <div *ngIf="step === resetStep.verification">
                                <div class="otp-container">
                                   <app-verification (otpEmitter)="getOtpFromChild($event)"></app-verification>
                                   <div *ngIf="isLoading" class="spinner-overlay">
                                      <div class="m-spinner"></div>
                                    </div>
                                </div>
                                <div class="text-sm text-muted mt-3">
                                  We send six digits verification code to your email <b>{{forgotForm.get('email')?.value}}</b>. You can check your inbox.
                                </div>
                                <div class="mt-3 text-primary pointer" (click)="sendOtp()">
                                  <u>I didn't receive the code? Send again</u>
                                </div>
                                  <!-- <button class="btn btn-danger me-3 w-100 mt-3 mb-3" [disabled]="isLoading" (click)="verifyOtp()" *ngIf="step === resetStep.verification">
                                      <div class="spinner-border spinner-border-sm text-light me-1" role="status" *ngIf="isLoading"></div>Verify
                                  </button> -->
                                 </div>

                              <div *ngIf="step === resetStep.resetPassword">
                              <div class="text-center">
                                <img src="https://cdni.iconscout.com/illustration/premium/thumb/forgot-password-reset-illustration-download-in-svg-png-gif-file-formats--restore-cyber-security-business-technology-pack-illustrations-5889578.png" alt="" width="150px">
                                <div class="text-center text-muted">Your new password must be different form previous used passwords.</div>
                              </div>

                              <div class="mt-3">
                                <form [formGroup]="passwordResetForm">
                                  <div class="mb-3">
                                    <label for="password-comfirm" class="form-label">Password</label>
                                    <input type="password" class="form-control" id="password-comfirm" formControlName="password" placeholder=""  [ngClass]="{'errorBorder' : isSubmitted && passwordResetForm.get('password')?.errors}"  (input)="onInputChange()" (keyup)="updatePasswordStrength(false)" autocomplete="new-password">
                                  </div>

                                  <div class="">
                                    <label for="password-singnup" class="form-label">Confirm Password</label>
                                    <input type="password" class="form-control" id="password-singnup" formControlName="confirmPassword" placeholder=""  [ngClass]="{'errorBorder' : isSubmitted && passwordResetForm.get('confirmPassword')?.errors}" (input)="onInputChange()" autocomplete="new-password">
                                  </div>
                                  <!-- Password strength progress bar -->
                                  <div class="mt-1 mb-2">
                                    <div class="progress" style="height: 5px;">
                                      <div class="progress-bar" [ngClass]="passwordStrength.class" role="progressbar"
                                        [style.width.%]="passwordStrength.value"
                                        [attr.aria-valuenow]="passwordStrength.value" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <small class="form-text">Password strength: <span class="fw-bold">{{passwordStrength.text}}</span></small>
                                  </div>
                                  <div class="text-danger" *ngIf="!isMatchPwd">Password does not match</div>
                                </form>
                              </div>
                              </div>
                          </div>
                        <button class="btn btn-danger me-3 w-100" [disabled]="isLoading" (click)="sendOtp()" *ngIf="step === resetStep.enterEmail">
                          <div class="spinner-border spinner-border-sm text-light me-1" role="status" *ngIf="isLoading"></div>Send
                        </button>
                        <!-- <button class="btn btn-danger me-3 w-100 mt-3 mb-3" [disabled]="isLoading" (click)="verifyOtp()" *ngIf="step === resetStep.verification">
                          <div class="spinner-border spinner-border-sm text-light me-1" role="status" *ngIf="isLoading"></div>Verify
                        </button> -->
                        <button class="btn btn-danger me-3 w-100 mt-3 mb-3" [disabled]="isLoading" (click)="createPassword()" *ngIf="step === resetStep.resetPassword">
                          <div class="spinner-border spinner-border-sm text-light me-1" role="status" *ngIf="isLoading"></div>Create
                        </button>
                      </div>
                    </div>
                   </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

